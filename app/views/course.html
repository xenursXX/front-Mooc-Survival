<div id="course-page">
  
  <div class="header-course" ng-show="!course.courseStep">
    <div class="container">
      <div class="row">
        <div class="col-md-4">
          <div class="img-course"></div>
        </div>
        <div class="col-md-8">
          <h1>{{ course.c.title }}</h1>
          <span class="label-category">#{{ course.c.category.name }}</span>
          <span class="author">Created by {{ course.c.author.username }}</span>
          <span class="created-at">Le {{ course.c.created_at }}</span>
        </div>
      </div>
    </div>
  </div>

  <div class="container course-content">
    <div class="row">

      <!-- Begin course -->
      <div class="col-md-12" ng-show="!course.courseStep">
        <h2>Résumé</h2>
        <p>{{ course.c.content.summary }}</p>
        <h2>Chapitres</h2>
        <ul class="chapter-list">
          <li ng-repeat="chapter in course.c.content.steps">
            <span class="label-chapter" ng-if="chapter.type == 1">Cours</span>
            <span class="label-chapter" ng-if="chapter.type == 2">Quizz</span>
            {{ chapter.title }}
          </li>
        </ul>
      </div>
      <div class="col-md-12 text-center" ng-show="!course.courseStep">
        <a href="#/course/{{ course.c.id }}/step/1" class="question-button">Let's go !</a>
      </div>

      
      <div class="col-md-12" ng-show="course.courseStep">
        <h2>{{ course.c.content.steps[course.courseStep - 1].title }}</h2>
        
        <!-- Basic content -->
        <div ng-if="course.c.content.steps[course.courseStep - 1].type == 1">
          <p>{{ course.c.content.steps[course.courseStep - 1].content }}</p>
        </div>

        <!-- Quizz content -->
        <div ng-if="course.c.content.steps[course.courseStep - 1].type == 2">
          <div class="question-block" ng-repeat="quizz in course.c.content.steps[course.courseStep - 1].quizz">
            <p class="question">{{ $index + 1 }}. {{ quizz.question }}</p>
            
            <div class="checkbox" ng-repeat="response in quizz.responses">
              <label>
                <input type="radio" ng-model="course.answers[quizz.id]" ng-value="$index"> {{ response.content }} 
              </label>
            </div>
          </div>
        </div>
        
        <div class="text-center">
          <button class="question-button" ng-click="course.nextStep()">Valider</button>
          <p ng-if="course.messageError">{{ course.messageError }}</p>
        </div>
      </div>

      


      <div class="col-md-12" ng-show="!course.courseStep">

        <h2 class="text-center">Ratings</h2>
        <span class="pull-right"
              uib-rating
              ng-model="course.stars"
              max="5"
              read-only="false"
              ng-click="course.hoveringOver(course.stars)"
              on-leave="overStar = null"
              titles="['one','two','three']"
              aria-labelledby="default-rating" >
        </span>
        <h2 class="text-center">Commentaires</h2>
        <!-- <button type="button" class="btn btn-default" ng-click="isCollapsed = !isCollapsed">Toggle collapse Vertically</button> -->
        <div class="panel panel-default" ng-repeat="item in course.c.comments track by $index">
            <div class="panel-heading">
              <h4 class="panel-title">
                <a role="button" ng-click="isCollapsed = !isCollapsed">
                  <div class="inline">{{item.title}}</div>

                  <div class="inline">{{item.date}}</div>
                </a>
              </h4>
            </div>
            <div  uib-collapse="isCollapsed" class="panel-collapse" >
              <div class="panel-body">
                {{item.content}}
                <span class="pull-right"
                      uib-rating
                      ng-model="item.stars"
                      max="5"
                      read-only="true"
                      on-leave="overStar = null"
                      titles="['one','two','three']"
                      aria-labelledby="default-rating" >
                </span>
              </div>
            </div>
          </div>
          <form novalidate class="simple-form">
            <label>Titre du commentaire <input type="text" ng-model="course.form.title" /></label><br />
            <label>Commentaire <textarea name="name" ng-model="course.form.content" rows="8" cols="80"></textarea></label><br />
            <input type="button" ng-click="course.reset()" value="Reset" />
            <input type="submit" ng-click="course.update(course.form)" value="Save" />
          </form>
          <pre>Comment = {{course.form | json}}</pre>
      </div>
    </div>
  </div>
</div>
